import { db } from "../firebase"
import { arrayUnion, collection, doc, updateDoc, getDocs, setDoc } from "firebase/firestore";
import { useState } from "react"

const Register = () => {
  const [name, setName] = useState("")
  const [price, setPrice] = useState("")
  const [place, setPlace] = useState("")
  const [kind, setKind] = useState("1")
  const [available, setAvailable] = useState("")
  const [deadLine, setDeadLine] = useState("")
  const [lati, setLati] = useState("")
  const [long, setLong] = useState("")

  //＜１つの店舗について、複数の時間帯、複数の曜日区分でdbに登録する関数＞
  const newItem = {
    name: name,
    price: Number(price),
    place: place,
    kind: kind,
    available: available,
    deadLine: deadLine,
    position: [Number(lati), Number(long)]
  };

  // ➀ 時間帯を指定

  //5~7
  //const collections = ["5:00~7:00"];
  //8~10
  //const collections = ["8:00~10:00"];
  //8~19
  //const collections = ["8:00~10:00", "10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00"];
  //10~11.5
  //const collections = ["10:00~11:00", "11:00~11:30"];
  //10~12.5
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30"];
  //10~14
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00"];
  //10~15
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00"];
  //10~15.5
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30"];
  //10~16
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00"];
  //10~16.5
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30"];
  //10~18
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00"];
  //10~18.5
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30"];
  //10~18.75
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45"];
  //10~19
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00"];
  //10~21.75
  const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45"];
  //10~22.75
  //const collections = ["10:00~11:00", "11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", ];
  //11~12
  //const collections = ["11:00~11:30", "11:30~12:00"];
  //11~12.5
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30"];
  //11~13
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00"];
  //11~13.5
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30"];
  //11~15
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00"];
  //11~15.5
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30"];
  //11~16
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00"];
  //11~16.5
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30"];
  //11~17.5
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30"];
  //11~18
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00"];
  //11~19
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00"];
  //11~20.75
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45"];
  //11~21.75
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45"];
  //11~22.75
  //const collections = ["11:00~11:30", "11:30~12:00", "12:00~12:30", "12:30~13:00", "13:00~13:30", "13:30~14:00", "14:00~15:00", "15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", ];
  //15~19
  //const collections = ["15:00~15:30", "15:30~16:00", "16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00"] ;
  //16~19
  //const collections = ["16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00"] ;
  //16~20
  //const collections = ["16:00~16:30", "16:30~17:30", "17:30~18:00", "18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00"] ;
  //18~21.75
  //const collections = ["18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45"];
  //18~22.75
  //const collections = ["18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45"];
  //18~2.5
  //const collections = ["18:00~18:30", "18:30~18:45", "18:45~19:00", "19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30"];
  //19~21.75
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45"];
  //19~22.75
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45"];
  //19~23
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00"];
  //19~2
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00"];
  //19~2.5
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30"];
  //19~3
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00"];
  //19~5
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00", "3:00~3:30", "3:30~5:00"];
  //19~8
  //const collections = ["19:00~20:00", "20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00", "3:00~3:30", "3:30~5:00", "5:00~7:00", "7:00~8:00"];
  //20~3
  //const collections = ["20:00~20:45", "20:45~21:00", "21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00"];
  //21~2.5
  //const collections = ["21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30"];
  //21~3
  //const collections = ["21:00~21:45", "21:45~22:00", "22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00"];
  //22~2
  //const collections = ["22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00"];
  //22~2.5
  //const collections = ["22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30"];
  //22~3
  //const collections = ["22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00"];
  //22~3.5
  //const collections = ["22:00~22:45", "22:45~23:00", "23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00", "3:00~3:30"];
  //23~1.5
  //const collections = ["23:00~1:30"];
  //23~2.5
  //const collections = ["23:00~1:30", "1:30~2:00", "2:00~2:30"];
  //23~3
  //const collections = ["23:00~1:30", "1:30~2:00", "2:00~2:30", "2:30~3:00"];

  // ➁ 曜日区分を指定

  //➀➁
  //const documents = ["WeekDay", "FriDay", "BeforeHoliDay"]
  //const documents = ["HoliDay", "SaturDay", "SunDay"]
  //➀➂
  const documents = ["WeekDay"]
  //const documents = ["FriDay", "BeforeHoliDay", "HoliDay", "SaturDay", "SunDay"]
  //➀➃
  //const documents = ["WeekDay", "HoliDay", "SunDay"]
  //const documents = ["FriDay", "SaturDay", "BeforeHoliDay"]
  //➀➅
  //const documents = ["WeekDay", "FriDay", "SaturDay", "BeforeHoliDay"]
  //const documents = ["HoliDay", "SunDay"]

  //➀➂➅
  //const documents = ["FriDay", "BeforeHoliDay", "SaturDay"]
  //const documents = ["HoliDay", "SunDay"]

  //const documents = ["FriDay", "BeforeHoliDay"]
  //const documents = ["HoliDay", "SaturDay", "SunDay"]

  //const documents = ["WeekDay", "FriDay", "BeforeHoliDay", "HoliDay", "SaturDay", "SunDay"]


  const addToFreeArray = async () => {
    for (const collectionName of collections) {
      const myCollectionRef = collection(db, collectionName);
      for (const document of documents) {
        const myDocumentRef = doc(myCollectionRef, document);
        await updateDoc(myDocumentRef, {
          //"30minutes": arrayUnion(newItem)  // ➂ カテゴリを入力
          //"Free": arrayUnion(newItem)
          //"3HourPack": arrayUnion(newItem)
          "EndlessFree": arrayUnion(newItem)
          //"ShortFree": arrayUnion(newItem)
        });
      }
    }
  };
  const handleSubmit = () => {
    addToFreeArray();
    alert("送信しました！")
  }


  //＜コレクションをコピーする関数＞
  const sourceCollection = "18:30~19:00";
  const destinationCollection = "18:45~19:00";

  async function copyCollection() {
    const sourceSnapshot = await getDocs(collection(db, sourceCollection));
    sourceSnapshot.forEach(async (docSnapshot) => {
      const data = docSnapshot.data();
      const docId = docSnapshot.id;
      await setDoc(doc(db, destinationCollection, docId), data);
    });
  }

  const handleCopy = () => {
    copyCollection();
    alert("コピーしました！")
  }
  
  return (
    <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '40px'}}>
      <div style={{marginTop: '80px'}}>
        <span>名前: </span>
        <input style={{padding: '5px'}} onChange={(e) => setName(e.target.value)} value={name}></input> 
      </div>
      <div>
        <span>料金: </span>
        <input style={{padding: '5px'}} onChange={(e) => setPrice(e.target.value)} value={price}></input> 
      </div>
      <div>
        <span>場所: </span>
        <input style={{padding: '5px'}} onChange={(e) => setPlace(e.target.value)} value={place}></input> 
      </div>
      <div>
        <span>種類: </span>
        <input style={{padding: '5px'}} onChange={(e) => setKind(e.target.value)} value={kind}></input> 
      </div>
      <div>
        <span>時間: </span>
        <input style={{padding: '5px'}} onChange={(e) => setAvailable(e.target.value)} value={available}></input> 
      </div>
      <div>
        <span>締切: </span>
        <input style={{padding: '5px'}} onChange={(e) => setDeadLine(e.target.value)} value={deadLine}></input> 
      </div>
      <div>
        <span>緯度: </span>
        <input style={{padding: '5px'}} onChange={(e) => setLati(e.target.value)} value={lati}></input> 
      </div>
      <div>
        <span>経度: </span>
        <input style={{padding: '5px'}} onChange={(e) => setLong(e.target.value)} value={long}></input> 
      </div>
      <button onClick={() => handleSubmit()} style={{padding: '20px', width: '10vw', marginTop: '80px', backgroundColor: 'tomato', color: 'white'}}>送信</button>
      <button onClick={() => handleCopy()} style={{padding: '20px', width: '10vw', marginTop: '30px', marginBottom: '30px', backgroundColor: 'blue', color: 'white'}}>コピー送信</button>
    </div>
  )
}

export default Register
